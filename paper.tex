%-----------------------------------------------------------------------------
%
%               Template for sigplanconf LaTeX Class
%
% Name:         sigplanconf-template.tex
%
% Purpose:      A template for sigplanconf.cls, which is a LaTeX 2e class
%               file for SIGPLAN conference proceedings.
%
% Guide:        Refer to "Author's Guide to the ACM SIGPLAN Class,"
%               sigplanconf-guide.pdf
%
% Author:       Paul C. Anagnostopoulos
%               Windfall Software
%               978 371-2316
%               paul@windfall.com
%
% Created:      15 February 2005
%
%-----------------------------------------------------------------------------


\documentclass[preprint]{sigplanconf}

% The following \documentclass options may be useful:
%
% 10pt          To set in 10-point type instead of 9-point.
% 11pt          To set in 11-point type instead of 9-point.
% authoryear    To obtain author/year citation style instead of numeric.

\usepackage{amsmath}

\begin{document}

\conferenceinfo{Haskell Symposium 2012}{13th September, Copenhagen.}
\copyrightyear{2012}
\copyrightdata{[to be supplied]}

\titlebanner{A draft paper to be submitted to Haskell Symposium 2012}
\preprintfooter{TBD: short description of paper}   % 'preprint' option specified.

\title{Behavior Driven Development in Haskell}
%\subtitle{Subtitle Text, if any}

\authorinfo{Simon HENGEL}
           {TBD: Affiliation}
           {TBD: Email}
\authorinfo{Trystan SPANGLER}
           {TBD: Affiliation}
           {TBD: Email}
\authorinfo{Kazuhiko YAMAMOTO}
           {IIJ Innovation Institute Inc.}
           {kazu@iij.ad.jp}

\maketitle

\begin{abstract}

TBD: Asbtract will be written at the final moment.

State the problem.

Say why itâ€™s an interesting problem.

Say what your solution achieves.

Say what follows from your solution.

\end{abstract}

\category{TBD:CR-number}{subcategory}{third-level}

\terms
TBD

\keywords
software design, documentation, automatic test

\section{Introduction}

%%%% Describe the problem.

One of the best features of Haskell is its strong type system, 
which ensures no type errors in programs if they can be complied.
Thanks to this, programs written in Haskell have less bugs
than other programming languages which do not provide such strong type systems.

Unfortunately, the strong type system of Haskell does not guarantee
no value errors.
Haskellers is, however, apt to rely on the strong type system too much.
They tend to write less test programs than programmers of other
programming languages.

This also means that typical usage examples cannot be found from test programs.
We agree that type signatures are good abstract document but
there are many functions whose behaviors cannot be guessed from
their names and type signatures.

Why do we dislike to write test programs?
It is probably because writing test programs is not fun.
To encourage Haskellers to write more test programs
to detect value errors,
we need a scheme to make writing test programs fun.

For this purpose,
we brought design methods from other programming language communities and
integrated them with a Haskell-original test method.
In particular, we introduced {\tt doctest} and
integrated with QuickCheck. 
We also implemented {\tt hspec} with QuickCheck enabled.

In our method, the text for design takes role of documentation and
is used as test cases. 
This method would motivate Haskellers
bacause it has a kill-three-birds-with-one-stone aspect.

%The purpose of this paper is to encourage Haskllers to write documentation, which can be used for testing, in their libraries.

%%%% State your contributions.

The contribution of this paper is as follows:

\begin{itemize}
\item Introduced {\tt doctest} from Python community to Haskell community
and integrated it with QuickCheck (Section XXX)
\item Introduced {\tt hspec} from Ruby community to Haskell community and
integrated it with QuickCheck (Section XXX)
\item Show best current practice of design/documentation/tests (Section XXX)
\end{itemize}

\section{Terminology}

\begin{description}
\item[unit test] TBD
\item[example] TBD
\item[property] TBD
\item[behavior] TBD
\item[documentation] Text written in Haskell comments and parsed by Haddock
\end{description}

\section{Observation}

Haddock example and doctest.

Should talk about equation property. (e.g. container)
Quickcheck.

pure vs IO.

\section{Solution}

FIRST convey the idea.

\subsection{Tests suitable with doctest}

\subsection{Tests suitable with hspec}

\subsection{Integrating multiple test suites}

\section{Best current practice}

undefined.

The authors are not fundamentalist.
If functions to be defined are simple enough,
we might implement them first withtout signatures.
And their signatures can be automatically
inserted by IDE (like ghc-mod) later
if Haskell compilers can infer correctly.
Also, we can cut and paste typical examples and their results
from Haskell interpreters to their document.

\section{Implementation}

\subsection{doctest}

how to handle error cases.

\subsection{doctest and QuickCheck}

\subsection{hspec}

\section{Related work}

literate programming.

hunit.

test-framework.

smallCheck.

And others?

\section{Conclusion}

%% \appendix
%% \section{Appendix Title}

%% This is the text of the appendix, if you need one.

\acks

We would like to thank
Nick Smallbone for having improved QuickCheck so that boolean property is tested
just once.
We are grateful to David Waern and Simon Marlow
for introducing the property syntax to haddock.


% We recommend abbrvnat bibliography style.

\bibliographystyle{abbrvnat}

% The bibliography should be embedded for final submission.

\begin{thebibliography}{}
\softraggedright

\bibitem[Smith et~al.(2009)Smith, Jones]{smith02}
P. Q. Smith, and X. Y. Jones. ...reference text...

\end{thebibliography}

\end{document}
